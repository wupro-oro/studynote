# 字符设备驱动
## 写LED硬件驱动的流程
1. 看原理图
	- 确认使用哪个引脚号 GPIO0_B5
2. 看数据手册
	- GPIO控制器，知道基地址，再加上要偏移的量确认操作的位置

1. 开始写代码
	- arm工程师
		- 寄存器级别编程，操作物理地址，看芯片手册去编写
		- 标准固件库 看固件库说明 操作函数实现功能
	- Liunux驱动工程师
		- 寄存器级别编程 产看数据手册操作物[[LED中断]]理地址，**繁琐 不好移植**
		- GPIO库函数 操作函数 **可移植性强 常用**

---
## [[GPIO库函数的使用]]

---

## 计算rk3399引脚号
- **关于芯片RK3399的io控制中一个重要参数GPIO_number的计算方法为：n*32 + (K-A)*8 + x**

## [[用户空间和内核空间数据交换]]

---

## [[ioctl系统调用实现]]
---
## 框架
- ![[字符设备驱动框架总结.png]]